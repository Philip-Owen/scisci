<div ng-include="'views/partials/nav.html'"></div>

<button ng-click="vm.saveModule()">Save Module</button>

<h1>Module Creator</h1>

<ul>
    <li>Material Cost: {{vm.calculations.material_cost}}</li>
    <li>Material in Kit Cost: {{vm.calculations.material_in_kit_cost}}</li>
    <li>Estimated Labor Cost: {{vm.calculations.estimated_labor_cost}}</li>
    <li>Materials Ordered + Labor: {{vm.calculations.materials_ordered_labor}}</li>
    <li>Materials in Kit + Labor: {{vm.calculations.materials_in_kit_labor}}</li>
</ul>


<h2>Components</h2>
<label>Name <input placeholder="Module Name" ng-model="vm.module.data.name" /></label><br />
<label>Code <input placeholder="Code" ng-model="vm.module.data.code" /></label><br />
<label>Estimated Assembly Time <input type="number" placeholder="Estimated Assembly Time (hrs.)" ng-model="vm.module.data.estimated_assembly_time" /></label><br />


<h3>Version</h3>
<label>Version Number <input type="text" placeholder="Version Number" ng-model="vm.module.data.version_number" /></label><br />
<label>Version Notes <textarea type="text" placeholder="Version Notes" ng-model="vm.module.data.version_notes" /></textarea></label>

<!-- <input type="text" placeholder="DATEPICKER" ng-model="vm.module.data.version_date" /> -->
<!-- <input type="text" placeholder="Live-search Components" /> -->


<h2>Resources</h2>
    <label>Google Drive <input placeholder="URL" ng-model="vm.module.data.module_drive_link" /></label><br />
    <label>To Be Printed <input placeholder="URL" ng-model="vm.module.data.to_be_printed_link" /></label><br />
    <label>Assembly Video <input placeholder="URL" ng-model="vm.module.data.assembly_video_link" /></label><br />
    <label>Activity Video <input placeholder="URL" ng-model="vm.module.data.activity_video_link" /></label><br />
    <label>Kit Content Sheet <input placeholder="URL" ng-model="vm.module.data.kit_content_link" /></label><br />
    <label>Custom Link 1
        <input placeholder="Title" ng-model="vm.module.data.other1_title" />
        <input placeholder="URL" ng-model="vm.module.data.other1_link" /></label><br />
    <label>Custom Link 2
        <input placeholder="Title" ng-model="vm.module.data.other2_title" />
        <input placeholder="URL" ng-model="vm.module.data.other2_link" />
    </label><br />


<h2>Assembly Instructions</h2>

<textarea ng-model="vm.module.data.assembly_notes"></textarea>

<h2>Components in Module</h2>


<md-input-container>
    <label>Filter Components</label>
    <input ng-model="filterString.name" />
  </md-input-container>

<div ng-show="filterString.name.length > 0">
  <!-- Table mock up for the time being, will be changed out later for accordion divs  -->
   <div class="mock-table" role="table" aria-label="Components">
      <div class="mock-table-header" role="rowgroup">
          <div class="mock-table-row mock-table-row-header" row="row">
            <h3 class="columnheader">Name <span ng-click="vm.sortColumns('nameAsc')">&#9650;</span><span ng-click="vm.sortColumns('nameDesc')">&#9660;</span></h3>
            <h3 class="columnheader">Type <span ng-click="vm.sortColumns('typeAsc')">&#9650;</span><span ng-click="vm.sortColumns('typeDesc')">&#9660;</span></h3>
            <h3 class="columnheader">Description</h3>
            <h3 class="columnheader">Price Per Unit <span ng-click="vm.sortColumns('pricePUAsc')">&#9650;</span><span ng-click="vm.sortColumns('pricePUDesc')">&#9660;</span></h3>
            <h3 class="columnheader">Pieces Per Unit</h3>
            <h3 class="columnheader">General Stock <span ng-click="vm.sortColumns('genStockAsc')">&#9650;</span><span ng-click="vm.sortColumns('genStockDesc')">&#9660;</span></h3>
            <h3 class="columnheader">Consumable <span ng-click="vm.sortColumns('consumableAsc')">&#9650;</span><span ng-click="vm.sortColumns('consumableDesc')">&#9660;</span></h3>
            <h3 class="columnheader">Modules Used In</h3>
            <h3 class="columnheader">Vendor 1 Name <span ng-click="vm.sortColumns('vendor1Asc')">&#9650;</span><span ng-click="vm.sortColumns('vendor1Desc')">&#9660;</span></h3>
            <h3 class="columnheader">Vendor 1 Link</h3>
            <h3 class="columnheader">Vendor 2 Name <span ng-click="vm.sortColumns('vendor2Asc')">&#9650;</span><span ng-click="vm.sortColumns('vendor2Desc')">&#9660;</span></h3>
            <h3 class="columnheader">Vendor 2 Link</h3>
            <h3 class="columnheader">Notes</h3>
          </div><!-- /.mock-table-row -->
      </div> <!-- /.mock-table-header -->
      <div class="mock-table-body" role="rowgroup">
          <div class="mock-table-row" row="row" ng-repeat="component in vm.componentLibrary.list | filter:filterString ">
            <p role="cell" ng-if="!vm.edit[component.id]"><button ng-click="vm.addModuleComponentToDraft(component.id , 0)">Add</button>{{component.name}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.name" ng-model="component.name"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.type}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.type" ng-model="component.type"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.description}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.description" ng-model="component.description"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.price_per_unit}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.price_per_unit" ng-model="component.price_per_unit"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.pieces_per_unit}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.pieces_per_unit" ng-model="component.pieces_per_unit"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.general_stock_item}}</p>
            <p role="cell" ng-if="vm.edit[component.id]">
              <select ng-model="component.general_stock_item">
                <option ng-value="true">True</option>
                <option ng-value="false">False</option>
              </select>
            </p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.consumable}}</p>
            <p role="cell" ng-if="vm.edit[component.id]">
              <select ng-model="component.consumable">
                <option ng-value="true">True</option>
                <option ng-value="false">False</option>
              </select>
            </p>

            <p role="cell"><span ng-click="vm.getModules(component)">{{component.modules_used_in}}</span></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.vendor_name_primary}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.vendor_name_primary" ng-model="component.vendor_name_primary"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.vendor_url_primary}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.vendor_url_primary" ng-model="component.vendor_url_primary"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.vendor_name_secondary}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.vendor_name_secondary" ng-model="component.vendor_name_secondary"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.vendor_url_secondary}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.vendor_url_secondary" ng-model="component.vendor_url_secondary"></p>

            <p role="cell" ng-if="!vm.edit[component.id]">{{component.notes}}</p>
            <p role="cell" ng-if="vm.edit[component.id]"><input type="text" ng-value="component.notes" ng-model="component.notes"></p>

        </div>
      </div>
  </div>

</div>




<input ng-model="vm.newComponentId" placeholder="new component ID" />
<input ng-model="vm.newComponentQuantity" placeholder="new component quantity" type="number" />
<!-- <button ng-click="vm.addModuleComponent(vm.newComponentId, vm.newComponentQuantity)">Add Component</button> -->
<button ng-click="vm.addModuleComponentToDraft(vm.newComponentId, vm.newComponentQuantity)">Add Component Draft</button>

<div class="mock-table" role="table" aria-label="Components">
    <div class="mock-table-header" role="rowgroup">
      <div class="mock-table-row mock-table-row-header" row="row">
        <h3 class="columnheader">Pieces Per Kit</h3>
        <h3 class="columnheader">Name</h3>
        <h3 class="columnheader">Type</h3>
        <h3 class="columnheader">Description</h3>
        <h3 class="columnheader">Price Per Unit</h3>
        <h3 class="columnheader">Pieces Per Unit</h3>
        <h3 class="columnheader">Cost Per Unit</h3>
        <h3 class="columnheader">General Stock</h3>
        <h3 class="columnheader">Consumable</h3>
        <h3 class="columnheader">Modules Used In</h3>
        <h3 class="columnheader">Vendor Name 1</h3>
        <h3 class="columnheader">Vendor Link 1</h3>
        <h3 class="columnheader">Vendor Name 2</h3>
        <h3 class="columnheader">Vendor Link 2</h3>
        <h3 class="columnheader">Purpose/Notes</h3>
        <h3 class="columnheader">Delete</h3>
    </div><!-- /.mock-table-row-header -->
  </div><!-- /.mock-table-header -->

    <div ng-repeat="row in vm.components.data" class="mock-table-body" role="rowgroup">
        <div class="mock-table-row" row="row">
        <p role="cell"><input type="number" ng-model="row.pieces_per_kit" /></p>
        <p role="cell">{{row.name}}</p>
        <p role="cell">{{row.type}}</p>
        <p role="cell">{{row.description}}</p>
        <p role="cell">{{row.price_per_unit}}</p>
        <p role="cell">{{row.pieces_per_unit}}</p>
        <p role="cell">{{row.cost_per_unit}}</p>
        <p role="cell">{{row.general_stock_item}}</p>
        <p role="cell">{{row.consumable}}</p>
        <p role="cell">{{row.modules_used_in}}</p>
        <p role="cell">{{row.vendor_name_primary}}</p>
        <p role="cell">{{row.vendor_url_primary}}</p>
        <p role="cell">{{row.vendor_name_secondary}}</p>
        <p role="cell">{{row.vendor_url_secondary}}</p>
        <p role="cell">{{row.notes}}</p>
        <p role="cell"><button ng-click="vm.deleteModuleComponentInDraft(row.module_id, row.component_id)">Delete</button></p>
        </div><!-- /.mock-table-row -->
    </div><!-- /.mock-table-body -->
</div><!-- /.mock-table-header -->
